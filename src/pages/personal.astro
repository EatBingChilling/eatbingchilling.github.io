---
import { Icon } from "astro-icon/components";
import { profileConfig, siteConfig } from "../config";
import MainGridLayout from "../layouts/MainGridLayout.astro";

const githubUsername = "EatBingChilling"; // 从你的配置中提取
const githubInfo = {
	name: profileConfig.name,
	bio: profileConfig.bio,
	avatar_url: profileConfig.avatar,
	total_repos: 0,
	total_stars: 0,
	tech_stack: [
		{ name: "Python", color: "#3776ab" },
		{ name: "TypeScript", color: "#3178c6" },
		{ name: "JavaScript", color: "#f7df1e" },
		{ name: "Astro", color: "#ff5d01" },
	],
	recent_repos: [],
};
---

<MainGridLayout title="个人主页" description={profileConfig.bio || "个人主页"}>
	<div class="flex w-full rounded-[var(--radius-large)] overflow-hidden relative">
		<div class="card-base z-10 px-6 md:px-9 py-6 md:py-8 relative w-full">
			<!-- 内容区域 -->
			<div class="space-y-6">
				<!-- 社交链接 -->
				<div class="card-base p-6">
					<h2 class="text-2xl font-bold mb-4 flex items-center text-90">
						<Icon name="material-symbols:link-rounded" class="text-[var(--primary)] mr-2"></Icon>
						社交链接
					</h2>
					<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3">
						{profileConfig.links.map(link => (
							<a 
								href={link.url}
								target="_blank"
								rel="noopener noreferrer me"
								class="flex items-center gap-3 p-4 rounded-xl bg-[var(--btn-regular-bg)] hover:bg-[var(--btn-regular-bg-hover)] active:bg-[var(--btn-regular-bg-active)] transition group"
							>
								<div class="flex items-center justify-center w-10 h-10 rounded-lg bg-[var(--card-bg)] text-[var(--primary)] group-hover:scale-110 transition">
									<Icon name={link.icon} class="text-[1.5rem]"></Icon>
								</div>
								<span class="text-90 font-medium flex-1">{link.name}</span>
								<Icon name="material-symbols:arrow-forward-rounded" class="text-[1rem] text-50 group-hover:translate-x-1 transition"></Icon>
							</a>
						))}
					</div>
				</div>

				<!-- 快速链接 -->
				<div class="card-base p-6">
					<h2 class="text-2xl font-bold mb-4 flex items-center text-90">
						<Icon name="material-symbols:grid-view-rounded" class="text-[var(--primary)] mr-2"></Icon>
						快速链接
					</h2>
					<div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3">
						<a href="/" class="flex flex-col items-center gap-2 p-4 rounded-xl bg-[var(--btn-regular-bg)] hover:bg-[var(--btn-regular-bg-hover)] active:scale-95 transition">
							<Icon name="material-symbols:home-outline-rounded" class="text-[2rem] text-[var(--primary)]"></Icon>
							<span class="text-sm font-medium text-90">首页</span>
						</a>
						<a href="/archive/" class="flex flex-col items-center gap-2 p-4 rounded-xl bg-[var(--btn-regular-bg)] hover:bg-[var(--btn-regular-bg-hover)] active:scale-95 transition">
							<Icon name="material-symbols:archive-outline-rounded" class="text-[2rem] text-[var(--primary)]"></Icon>
							<span class="text-sm font-medium text-90">归档</span>
						</a>
						<a href="/about/" class="flex flex-col items-center gap-2 p-4 rounded-xl bg-[var(--btn-regular-bg)] hover:bg-[var(--btn-regular-bg-hover)] active:scale-95 transition">
							<Icon name="material-symbols:info-outline-rounded" class="text-[2rem] text-[var(--primary)]"></Icon>
							<span class="text-sm font-medium text-90">关于</span>
						</a>
						<a href="/friends/" class="flex flex-col items-center gap-2 p-4 rounded-xl bg-[var(--btn-regular-bg)] hover:bg-[var(--btn-regular-bg-hover)] active:scale-95 transition">
							<Icon name="material-symbols:group-rounded" class="text-[2rem] text-[var(--primary)]"></Icon>
							<span class="text-sm font-medium text-90">友链</span>
						</a>
						<a href="https://pages.phb1og.fun" target="_blank" rel="noopener noreferrer" class="flex flex-col items-center gap-2 p-4 rounded-xl bg-[var(--btn-regular-bg)] hover:bg-[var(--btn-regular-bg-hover)] active:scale-95 transition">
							<Icon name="fa6-solid:house" class="text-[2rem] text-[var(--primary)]"></Icon>
							<span class="text-sm font-medium text-90">主页</span>
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</MainGridLayout>

<script is:inline>
// 检测来源并显示提示
if (document.referrer && document.referrer.includes('eatbingchilling.github.io')) {
	// 创建dialog元素
	const dialog = document.createElement('dialog');
	dialog.className = 'fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-md w-[90vw] z-[9999] backdrop:bg-black/50';
	dialog.innerHTML = `
		<div class="flex flex-col items-center text-center gap-4">
			<div class="w-16 h-16 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center">
				<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-blue-600 dark:text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
				</svg>
			</div>
			<h3 class="text-xl font-bold text-gray-900 dark:text-white">温馨提示</h3>
			<p class="text-gray-600 dark:text-gray-300">
				检测到您来自旧域名，请使用新域名访问：<br>
				<strong class="text-blue-600 dark:text-blue-400">phb1og.fun</strong>
			</p>
			<div class="flex gap-3 w-full">
				<button id="dialog-cancel" class="flex-1 px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition font-medium text-gray-900 dark:text-white">
					知道了
				</button>
				<button id="dialog-confirm" class="flex-1 px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 transition font-medium text-white">
					前往新域名
				</button>
			</div>
		</div>
	`;
	
	document.body.appendChild(dialog);
	dialog.showModal();
	
	document.getElementById('dialog-cancel').addEventListener('click', () => {
		dialog.close();
		dialog.remove();
	});
	
	document.getElementById('dialog-confirm').addEventListener('click', () => {
		window.location.href = 'https://phb1og.fun' + window.location.pathname;
	});
}
</script>

